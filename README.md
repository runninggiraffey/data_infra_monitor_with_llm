# LLM ê¸°ë°˜ ë°ì´í„° ì¸í”„ë¼ ëª¨ë‹ˆí„°ë§ ì„œë¹„ìŠ¤

LLM ê¸°ë°˜ ë°ì´í„° ì¸í”„ë¼ ëª¨ë‹ˆí„°ë§ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.

Data Plaform ê°œìš” 
![DataOps Overview](image/dataops_overview.png)


## ğŸ¯ í”„ë¡œì íŠ¸ ê°œìš”

í´ëŸ¬ìŠ¤í„° CPU ì‚¬ìš©ìœ¨ì´ ë†’ë‹¤ëŠ” ì•ŒëŒì„ ë°›ì€ í›„ ì±—ë´‡ì„ í†µí•´ ì¸í”„ë¼ ìƒí™©ì„ ë¶„ì„í•˜ê³  ì¡°ì¹˜í•  ìˆ˜ ìˆëŠ” ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.

### ì£¼ìš” ê¸°ëŠ¥

- **Infra Engineer Agent**: í´ëŸ¬ìŠ¤í„° ê°€ë™ìœ¨ ë° ì‹œìŠ¤í…œ í˜„í™© ë¶„ì„
- **Data Engineer Agent**: Spark ì¡ ê´€ë¦¬ ë° ìµœì í™”
- **Admin Guide Agent**: ìš´ì˜ ë§¤ë‰´ì–¼, ì´ë ¥, ì™¸ë¶€ ì •ë³´ ê²€ìƒ‰
- **Gradio ì›¹ ì¸í„°í˜ì´ìŠ¤**: ì‚¬ìš©ì ì¹œí™”ì ì¸ ì±—ë´‡ ì¸í„°í˜ì´ìŠ¤

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
ì‚¬ìš©ì ì§ˆë¬¸ â†’ ë¼ìš°íŒ… ë¶„ì„ â†’ ì ì ˆí•œ ì—ì´ì „íŠ¸ ì„ íƒ â†’ ì²˜ë¦¬ â†’ ìµœì¢… ë‹µë³€
    â†“
ì¸í”„ë¼ ê´€ë ¨ â†’ Infra Engineer Agent
ë°ì´í„° ê´€ë ¨ â†’ Data Engineer Agent  
ìš´ì˜ ê´€ë ¨ â†’ Admin Guide Agent
    â†“
ê° ì—ì´ì „íŠ¸ â†’ Generate Final Answer â†’ ìµœì¢… ë‹µë³€
```

## ğŸ“‹ ì‹œë‚˜ë¦¬ì˜¤

### ë¼ìš°íŒ… ì˜ˆì‹œ:

1. **"í˜„ì¬ í´ëŸ¬ìŠ¤í„° ê°€ë™ìœ¨ ì•Œë ¤ì¤˜?"** â†’ **Infra Engineer Agent**
   - í‚¤ì›Œë“œ: "í´ëŸ¬ìŠ¤í„°", "ê°€ë™ìœ¨" â†’ ì¸í”„ë¼ ê´€ë ¨ìœ¼ë¡œ ë¶„ë¥˜
   - í´ëŸ¬ìŠ¤í„° ì‹œìŠ¤í…œ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©í˜„í™© ë§¤íŠ¸ë¦­ ë¶„ì„

2. **"ë¦¬ì†ŒìŠ¤ë¥¼ ë§ì´ ì‚¬ìš©í•˜ëŠ” spark ì¡ 3ê°œ ì¶”ì¶œí•´ì¤˜?"** â†’ **Data Engineer Agent**
   - í‚¤ì›Œë“œ: "spark", "ì¡" â†’ ë°ì´í„° ê´€ë ¨ìœ¼ë¡œ ë¶„ë¥˜
   - Spark ì¡ ì •ë³´ ì¡°íšŒ ë° ë¶„ì„

3. **"í´ëŸ¬ìŠ¤í„° ê°€ë™ìœ¨ì´ ë†’ì„ë•Œ ì–´ë–»ê²Œ í•´ì•¼ë˜?"** â†’ **Admin Guide Agent**
   - í‚¤ì›Œë“œ: "ì–´ë–»ê²Œ", "í•´ì•¼ë˜" â†’ ìš´ì˜ ê´€ë ¨ìœ¼ë¡œ ë¶„ë¥˜
   - ìš´ì˜ ë§¤ë‰´ì–¼, ì´ë ¥, ì¸í„°ë„· ì •ë³´ ì¢…í•©

4. **"ì´ ì¤‘ì—ì„œ ìƒìœ„ 2ê°œ spark ì¡ Kill í•´ì¤˜?"** â†’ **Data Engineer Agent**
   - í‚¤ì›Œë“œ: "spark", "ì¡", "kill" â†’ ë°ì´í„° ê´€ë ¨ìœ¼ë¡œ ë¶„ë¥˜
   - Spark ì¡ ì¢…ë£Œ ê¸°ëŠ¥ ì‹¤í–‰

5. **"í´ëŸ¬ìŠ¤í„° ì‚¬ìš©ìœ¨ì´ ë–¨ì–´ì¡ŒëŠ”ì§€ í™•ì¸í•´ì¤˜?"** â†’ **Infra Engineer Agent**
   - í‚¤ì›Œë“œ: "í´ëŸ¬ìŠ¤í„°", "ì‚¬ìš©ìœ¨", "í™•ì¸" â†’ ì¸í”„ë¼ ê´€ë ¨ìœ¼ë¡œ ë¶„ë¥˜
   - ì¡°ì¹˜ í›„ ìƒíƒœ ì¬í™•ì¸



## ğŸ”§ ì£¼ìš” ì»´í¬ë„ŒíŠ¸

### 0. RAG (Retrieval-Augmented Generation) ì‹œìŠ¤í…œ

ìš´ì˜ ë§¤ë‰´ì–¼ê³¼ ìš´ì˜ ì´ë ¥ì„ Chroma ë²¡í„° ë°ì´í„°ë² ì´ìŠ¤ë¡œ êµ¬ì¶•í•˜ê³  OpenAI Embeddingsë¥¼ ì‚¬ìš©í•œ ìœ ì‚¬ë„ ê²€ìƒ‰ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

#### RAG ì‹œìŠ¤í…œ êµ¬ì„± ìš”ì†Œ:
- **ë¬¸ì„œ ë¡œë”**: `TextLoader`ë¥¼ ì‚¬ìš©í•˜ì—¬ í…ìŠ¤íŠ¸ íŒŒì¼ ë¡œë“œ
- **í…ìŠ¤íŠ¸ ë¶„í• **: `RecursiveCharacterTextSplitter`ë¡œ ì²­í¬ ë‹¨ìœ„ ë¶„í• 
- **ì„ë² ë”©**: OpenAI `text-embedding-3-small` ëª¨ë¸ ì‚¬ìš©
- **ë²¡í„° ë°ì´í„°ë² ì´ìŠ¤**: Chroma DBë¡œ ë²¡í„° ì €ì¥ ë° ê²€ìƒ‰
- **ìœ ì‚¬ë„ ê²€ìƒ‰**: ì¿¼ë¦¬ì™€ ê°€ì¥ ìœ ì‚¬í•œ ë¬¸ì„œ 3ê°œ ê²€ìƒ‰

#### ë²¡í„° ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°:
```
chroma_db/
â”œâ”€â”€ operation_manual/     # ìš´ì˜ ë§¤ë‰´ì–¼ ë²¡í„° ì €ì¥ì†Œ
â””â”€â”€ operation_history/    # ìš´ì˜ ì´ë ¥ ë²¡í„° ì €ì¥ì†Œ
```

#### ê²€ìƒ‰ í”„ë¡œì„¸ìŠ¤:
1. **ìš´ì˜ ë§¤ë‰´ì–¼/ì´ë ¥ ê²€ìƒ‰**: ì‚¬ìš©ì ì§ˆë¬¸ â†’ OpenAI Embeddingsë¡œ ë²¡í„°í™” â†’ Chroma DBì—ì„œ ìœ ì‚¬í•œ ë¬¸ì„œ ê²€ìƒ‰ (k=3)
2. **ì¸í„°ë„· ê²€ìƒ‰**: ì‚¬ìš©ì ì§ˆë¬¸ â†’ Tavily APIë¡œ ì‹¤ì‹œê°„ ì›¹ ê²€ìƒ‰ â†’ ê´€ë ¨ ë„ë©”ì¸ì—ì„œ ìµœì‹  ì •ë³´ ìˆ˜ì§‘
3. **í†µí•© ë‹µë³€**: ê²€ìƒ‰ëœ ëª¨ë“  ì •ë³´ë¥¼ LLMì— ì „ë‹¬í•˜ì—¬ ì¢…í•©ì ì¸ ë‹µë³€ ìƒì„±

#### Tavily ê²€ìƒ‰ íŠ¹ì§•:
- **ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ë„ë©”ì¸**: Apache, Databricks, Cloudera, Stack Overflow, Medium ë“±
- **ê³ ê¸‰ ê²€ìƒ‰**: Advanced ê²€ìƒ‰ ëª¨ë“œë¡œ ì •í™•í•œ ê²°ê³¼ ì œê³µ
- **ìµœëŒ€ 5ê°œ ê²°ê³¼**: ê´€ë ¨ì„± ë†’ì€ ìƒìœ„ 5ê°œ ê²€ìƒ‰ ê²°ê³¼ ë°˜í™˜
- **ì˜¤ë¥˜ ì²˜ë¦¬**: API í‚¤ ì—†ìŒ, ê²€ìƒ‰ ì‹¤íŒ¨, ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ì‹œ ëª…í™•í•œ ì˜¤ë¥˜ ë©”ì‹œì§€ ì œê³µ

### 1. ë„êµ¬ (Tools)

- `get_cluster_metrics()`: í´ëŸ¬ìŠ¤í„° ì‹œìŠ¤í…œ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ ì¡°íšŒ
- `get_spark_jobs()`: Spark ì¡ ì •ë³´ ì¡°íšŒ
- `kill_spark_job()`: Spark ì¡ ì¢…ë£Œ
- `search_operation_manual()`: ìš´ì˜ ë§¤ë‰´ì–¼ ë²¡í„° ê²€ìƒ‰ (Chroma DB)
- `search_operation_history()`: ìš´ì˜ ì´ë ¥ ë²¡í„° ê²€ìƒ‰ (Chroma DB)
- `search_internet_info()`: Tavilyë¥¼ ì‚¬ìš©í•œ ì¸í„°ë„· ì •ë³´ ê²€ìƒ‰

### 2. ì—ì´ì „íŠ¸ (Agents)

- **Infra Engineer Agent**: í´ëŸ¬ìŠ¤í„° ìƒíƒœ ë¶„ì„
- **Data Engineer Agent**: Spark ì¡ ê´€ë¦¬
- **Admin Guide Agent**: ìš´ì˜ ê°€ì´ë“œ ì œê³µ

### 3. LangGraph ì›Œí¬í”Œë¡œìš°

```
START â†’ Route Query â†’ Conditional Routing â†’ Selected Agent â†’ Generate Answer â†’ END
                                    â†“
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚         â”‚         â”‚
                    Infra Engineer  Data Engineer  Admin Guide
                            â”‚         â”‚         â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“
                            Generate Answer
```

#### ë¼ìš°íŒ… ë¡œì§:
- **ì¸í”„ë¼ ê´€ë ¨**: í´ëŸ¬ìŠ¤í„°, CPU, ë©”ëª¨ë¦¬, ë””ìŠ¤í¬, ë„¤íŠ¸ì›Œí¬, ë¦¬ì†ŒìŠ¤, ê°€ë™ìœ¨ ë“±
- **ë°ì´í„° ê´€ë ¨**: Spark, Hadoop, HDFS, YARN, Presto, ì¡, íŒŒì´í”„ë¼ì¸ ë“±  
- **ìš´ì˜ ê´€ë ¨**: ë§¤ë‰´ì–¼, ìš´ì˜, ì ˆì°¨, ê°€ì´ë“œ, ì´ë ¥, ê²½í—˜, ì‚¬ë¡€ ë“±

## ğŸ’¡ ì‚¬ìš© ì˜ˆì‹œ

### ì˜ˆì‹œ ì§ˆë¬¸ë“¤

1. **í˜„ì¬ í´ëŸ¬ìŠ¤í„° ê°€ë™ìœ¨ ì•Œë ¤ì¤˜?**
   - í´ëŸ¬ìŠ¤í„°ì˜ CPU, ë©”ëª¨ë¦¬, ë””ìŠ¤í¬, ë„¤íŠ¸ì›Œí¬ ì‚¬ìš©ë¥  ë¶„ì„

2. **í´ëŸ¬ìŠ¤í„° ê°€ë™ìœ¨ì´ ë†’ì„ë•Œ ì–´ë–»ê²Œ í•´ì•¼ë˜?**
   - ìš´ì˜ ë§¤ë‰´ì–¼, ì´ì „ ì‚¬ë¡€, Tavily ê²€ìƒ‰ì„ í†µí•œ ìµœì‹  ì •ë³´ë¥¼ ì¢…í•©í•œ ì¡°ì¹˜ ë°©ì•ˆ ì œì‹œ

3. **ë¦¬ì†ŒìŠ¤ë¥¼ ë§ì´ ì‚¬ìš©í•˜ëŠ” spark ì¡ 3ê°œ ì¶”ì¶œí•´ì¤˜?**
   - CPU ì‚¬ìš©ë¥  ê¸°ì¤€ ìƒìœ„ 3ê°œ Spark ì¡ ì •ë³´ ì œê³µ

4. **ì´ ì¤‘ì—ì„œ ìƒìœ„ 2ê°œ spark ì¡ Kill í•´ì¤˜?**
   - ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ì´ ë†’ì€ ìƒìœ„ 2ê°œ ì¡ ì¢…ë£Œ

5. **í´ëŸ¬ìŠ¤í„° ì‚¬ìš©ìœ¨ì´ ë–¨ì–´ì¡ŒëŠ”ì§€ í™•ì¸í•´ì¤˜?**
   - ì¡°ì¹˜ í›„ í´ëŸ¬ìŠ¤í„° ìƒíƒœ ì¬í™•ì¸

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

- **LangChain**: LLM ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë ˆì„ì›Œí¬
- **LangGraph**: ì›Œí¬í”Œë¡œìš° ë° ì—ì´ì „íŠ¸ ê´€ë¦¬
- **OpenAI GPT-4**: LLM ëª¨ë¸
- **OpenAI Embeddings**: í…ìŠ¤íŠ¸ ì„ë² ë”©
- **Chroma**: ë²¡í„° ë°ì´í„°ë² ì´ìŠ¤ (RAG ì‹œìŠ¤í…œ)
- **Tavily**: ì¸í„°ë„· ê²€ìƒ‰ API
- **Gradio**: ì›¹ ì¸í„°í˜ì´ìŠ¤

## TODO
- ì—­í• ë³„ prompt ìƒì„¸ ë¶„ë¦¬ 
- ê²€ìƒ‰ ê²°ê³¼, íšŒì‹  ê²°ê³¼ ê²€ì¦ 
- GW API ì„œë²„ êµ¬ì¶• --> Tool Call í˜¸ì¶œ
- ìš´ì˜ ì‘ì—… ì§€ì‹œì „ Human-In-The-Loop êµ¬í˜„ 
- data platform êµ¬ì„±ê³¼ data flowì™€ ê´€ë ¨ëœ knowledge graph -> RCA(Root Cause Analysis)
- slack íˆ´ ì—°ë™ 
