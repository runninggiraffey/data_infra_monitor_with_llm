# LLM κΈ°λ° λ°μ΄ν„° μΈν”„λΌ λ¨λ‹ν„°λ§ μ„λΉ„μ¤

LLM κΈ°λ° λ°μ΄ν„° μΈν”„λΌ λ¨λ‹ν„°λ§ μ„λΉ„μ¤μ…λ‹λ‹¤.

Data Plaform κ°μ” 
![DataOps Overview](image/dataops_overview.png)


## π― ν”„λ΅μ νΈ κ°μ”

ν΄λ¬μ¤ν„° CPU μ‚¬μ©μ¨μ΄ λ†’λ‹¤λ” μ•λμ„ λ°›μ€ ν›„ μ±—λ΄‡μ„ ν†µν•΄ μΈν”„λΌ μƒν™©μ„ λ¶„μ„ν•κ³  μ΅°μΉν•  μ μλ” μ„λΉ„μ¤μ…λ‹λ‹¤.

### μ£Όμ” κΈ°λ¥

- **Infra Engineer Agent**: ν΄λ¬μ¤ν„° κ°€λ™μ¨ λ° μ‹μ¤ν… ν„ν™© λ¶„μ„
- **Data Engineer Agent**: Spark μ΅ κ΄€λ¦¬ λ° μµμ ν™”
- **Admin Guide Agent**: μ΄μ λ§¤λ‰΄μ–Ό, μ΄λ ¥, μ™Έλ¶€ μ •λ³΄ κ²€μƒ‰
- **Gradio μ›Ή μΈν„°νμ΄μ¤**: μ‚¬μ©μ μΉν™”μ μΈ μ±—λ΄‡ μΈν„°νμ΄μ¤

## π—οΈ μ‹μ¤ν… μ•„ν‚¤ν…μ²

```
μ‚¬μ©μ μ§λ¬Έ β†’ λΌμ°ν… λ¶„μ„ β†’ μ μ ν• μ—μ΄μ „νΈ μ„ νƒ β†’ μ²λ¦¬ β†’ μµμΆ… λ‹µλ³€
    β†“
μΈν”„λΌ κ΄€λ ¨ β†’ Infra Engineer Agent
λ°μ΄ν„° κ΄€λ ¨ β†’ Data Engineer Agent  
μ΄μ κ΄€λ ¨ β†’ Admin Guide Agent
    β†“
κ° μ—μ΄μ „νΈ β†’ Generate Final Answer β†’ μµμΆ… λ‹µλ³€
```

## π“‹ μ‹λ‚λ¦¬μ¤

### λΌμ°ν… μμ‹:

1. **"ν„μ¬ ν΄λ¬μ¤ν„° κ°€λ™μ¨ μ•λ ¤μ¤?"** β†’ **Infra Engineer Agent**
   - ν‚¤μ›λ“: "ν΄λ¬μ¤ν„°", "κ°€λ™μ¨" β†’ μΈν”„λΌ κ΄€λ ¨μΌλ΅ λ¶„λ¥
   - ν΄λ¬μ¤ν„° μ‹μ¤ν… λ¦¬μ†μ¤ μ‚¬μ©ν„ν™© λ§¤νΈλ¦­ λ¶„μ„

2. **"λ¦¬μ†μ¤λ¥Ό λ§μ΄ μ‚¬μ©ν•λ” spark μ΅ 3κ° μ¶”μ¶ν•΄μ¤?"** β†’ **Data Engineer Agent**
   - ν‚¤μ›λ“: "spark", "μ΅" β†’ λ°μ΄ν„° κ΄€λ ¨μΌλ΅ λ¶„λ¥
   - Spark μ΅ μ •λ³΄ μ΅°ν λ° λ¶„μ„

3. **"ν΄λ¬μ¤ν„° κ°€λ™μ¨μ΄ λ†’μ„λ• μ–΄λ–»κ² ν•΄μ•Όλ?"** β†’ **Admin Guide Agent**
   - ν‚¤μ›λ“: "μ–΄λ–»κ²", "ν•΄μ•Όλ" β†’ μ΄μ κ΄€λ ¨μΌλ΅ λ¶„λ¥
   - μ΄μ λ§¤λ‰΄μ–Ό, μ΄λ ¥, μΈν„°λ„· μ •λ³΄ μΆ…ν•©

4. **"μ΄ μ¤‘μ—μ„ μƒμ„ 2κ° spark μ΅ Kill ν•΄μ¤?"** β†’ **Data Engineer Agent**
   - ν‚¤μ›λ“: "spark", "μ΅", "kill" β†’ λ°μ΄ν„° κ΄€λ ¨μΌλ΅ λ¶„λ¥
   - Spark μ΅ μΆ…λ£ κΈ°λ¥ μ‹¤ν–‰

5. **"ν΄λ¬μ¤ν„° μ‚¬μ©μ¨μ΄ λ–¨μ–΄μ΅λ”μ§€ ν™•μΈν•΄μ¤?"** β†’ **Infra Engineer Agent**
   - ν‚¤μ›λ“: "ν΄λ¬μ¤ν„°", "μ‚¬μ©μ¨", "ν™•μΈ" β†’ μΈν”„λΌ κ΄€λ ¨μΌλ΅ λ¶„λ¥
   - μ΅°μΉ ν›„ μƒνƒ μ¬ν™•μΈ



## π”§ μ£Όμ” μ»΄ν¬λ„νΈ

### 0. RAG (Retrieval-Augmented Generation) μ‹μ¤ν…

μ΄μ λ§¤λ‰΄μ–Όκ³Ό μ΄μ μ΄λ ¥μ„ Chroma λ²΅ν„° λ°μ΄ν„°λ² μ΄μ¤λ΅ κµ¬μ¶•ν•κ³  OpenAI Embeddingsλ¥Ό μ‚¬μ©ν• μ μ‚¬λ„ κ²€μƒ‰μ„ κµ¬ν„ν–μµλ‹λ‹¤.

#### RAG μ‹μ¤ν… κµ¬μ„± μ”μ†:
- **λ¬Έμ„ λ΅λ”**: `TextLoader`λ¥Ό μ‚¬μ©ν•μ—¬ ν…μ¤νΈ νμΌ λ΅λ“
- **ν…μ¤νΈ λ¶„ν• **: `RecursiveCharacterTextSplitter`λ΅ μ²­ν¬ λ‹¨μ„ λ¶„ν• 
- **μ„λ² λ”©**: OpenAI `text-embedding-3-small` λ¨λΈ μ‚¬μ©
- **λ²΅ν„° λ°μ΄ν„°λ² μ΄μ¤**: Chroma DBλ΅ λ²΅ν„° μ €μ¥ λ° κ²€μƒ‰
- **μ μ‚¬λ„ κ²€μƒ‰**: μΏΌλ¦¬μ™€ κ°€μ¥ μ μ‚¬ν• λ¬Έμ„ 3κ° κ²€μƒ‰

#### λ²΅ν„° λ°μ΄ν„°λ² μ΄μ¤ κµ¬μ΅°:
```
chroma_db/
β”β”€β”€ operation_manual/     # μ΄μ λ§¤λ‰΄μ–Ό λ²΅ν„° μ €μ¥μ†
β””β”€β”€ operation_history/    # μ΄μ μ΄λ ¥ λ²΅ν„° μ €μ¥μ†
```

#### κ²€μƒ‰ ν”„λ΅μ„Έμ¤:
1. **μ΄μ λ§¤λ‰΄μ–Ό/μ΄λ ¥ κ²€μƒ‰**: μ‚¬μ©μ μ§λ¬Έ β†’ OpenAI Embeddingsλ΅ λ²΅ν„°ν™” β†’ Chroma DBμ—μ„ μ μ‚¬ν• λ¬Έμ„ κ²€μƒ‰ (k=3)
2. **μΈν„°λ„· κ²€μƒ‰**: μ‚¬μ©μ μ§λ¬Έ β†’ Tavily APIλ΅ μ‹¤μ‹κ°„ μ›Ή κ²€μƒ‰ β†’ κ΄€λ ¨ λ„λ©”μΈμ—μ„ μµμ‹  μ •λ³΄ μμ§‘
3. **ν†µν•© λ‹µλ³€**: κ²€μƒ‰λ λ¨λ“  μ •λ³΄λ¥Ό LLMμ— μ „λ‹¬ν•μ—¬ μΆ…ν•©μ μΈ λ‹µλ³€ μƒμ„±

#### Tavily κ²€μƒ‰ νΉμ§•:
- **μ‹ λΆ°ν•  μ μλ” λ„λ©”μΈ**: Apache, Databricks, Cloudera, Stack Overflow, Medium λ“±
- **κ³ κΈ‰ κ²€μƒ‰**: Advanced κ²€μƒ‰ λ¨λ“λ΅ μ •ν™•ν• κ²°κ³Ό μ κ³µ
- **μµλ€ 5κ° κ²°κ³Ό**: κ΄€λ ¨μ„± λ†’μ€ μƒμ„ 5κ° κ²€μƒ‰ κ²°κ³Ό λ°ν™
- **μ¤λ¥ μ²λ¦¬**: API ν‚¤ μ—†μ, κ²€μƒ‰ μ‹¤ν¨, λ„¤νΈμ›ν¬ μ¤λ¥ μ‹ λ…ν™•ν• μ¤λ¥ λ©”μ‹μ§€ μ κ³µ

### 1. λ„κµ¬ (Tools)

- `get_cluster_metrics()`: ν΄λ¬μ¤ν„° μ‹μ¤ν… λ¦¬μ†μ¤ μ‚¬μ©λ‰ μ΅°ν
- `get_spark_jobs()`: Spark μ΅ μ •λ³΄ μ΅°ν
- `kill_spark_job()`: Spark μ΅ μΆ…λ£
- `search_operation_manual()`: μ΄μ λ§¤λ‰΄μ–Ό λ²΅ν„° κ²€μƒ‰ (Chroma DB)
- `search_operation_history()`: μ΄μ μ΄λ ¥ λ²΅ν„° κ²€μƒ‰ (Chroma DB)
- `search_internet_info()`: Tavilyλ¥Ό μ‚¬μ©ν• μΈν„°λ„· μ •λ³΄ κ²€μƒ‰

### 2. μ—μ΄μ „νΈ (Agents)

- **Infra Engineer Agent**: ν΄λ¬μ¤ν„° μƒνƒ λ¶„μ„
- **Data Engineer Agent**: Spark μ΅ κ΄€λ¦¬
- **Admin Guide Agent**: μ΄μ κ°€μ΄λ“ μ κ³µ

### 3. LangGraph μ›ν¬ν”λ΅μ°

```
START β†’ Route Query β†’ Conditional Routing β†’ Selected Agent β†’ Generate Answer β†’ END
                                    β†“
                            β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                            β”‚         β”‚         β”‚
                    Infra Engineer  Data Engineer  Admin Guide
                            β”‚         β”‚         β”‚
                            β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                                    β†“
                            Generate Answer
```

#### λΌμ°ν… λ΅μ§:
- **μΈν”„λΌ κ΄€λ ¨**: ν΄λ¬μ¤ν„°, CPU, λ©”λ¨λ¦¬, λ””μ¤ν¬, λ„¤νΈμ›ν¬, λ¦¬μ†μ¤, κ°€λ™μ¨ λ“±
- **λ°μ΄ν„° κ΄€λ ¨**: Spark, Hadoop, HDFS, YARN, Presto, μ΅, νμ΄ν”„λΌμΈ λ“±  
- **μ΄μ κ΄€λ ¨**: λ§¤λ‰΄μ–Ό, μ΄μ, μ μ°¨, κ°€μ΄λ“, μ΄λ ¥, κ²½ν—, μ‚¬λ΅€ λ“±

## π’΅ μ‚¬μ© μμ‹

### μμ‹ μ§λ¬Έλ“¤

1. **ν„μ¬ ν΄λ¬μ¤ν„° κ°€λ™μ¨ μ•λ ¤μ¤?**
   - ν΄λ¬μ¤ν„°μ CPU, λ©”λ¨λ¦¬, λ””μ¤ν¬, λ„¤νΈμ›ν¬ μ‚¬μ©λ¥  λ¶„μ„

2. **ν΄λ¬μ¤ν„° κ°€λ™μ¨μ΄ λ†’μ„λ• μ–΄λ–»κ² ν•΄μ•Όλ?**
   - μ΄μ λ§¤λ‰΄μ–Ό, μ΄μ „ μ‚¬λ΅€, Tavily κ²€μƒ‰μ„ ν†µν• μµμ‹  μ •λ³΄λ¥Ό μΆ…ν•©ν• μ΅°μΉ λ°©μ• μ μ‹

3. **λ¦¬μ†μ¤λ¥Ό λ§μ΄ μ‚¬μ©ν•λ” spark μ΅ 3κ° μ¶”μ¶ν•΄μ¤?**
   - CPU μ‚¬μ©λ¥  κΈ°μ¤€ μƒμ„ 3κ° Spark μ΅ μ •λ³΄ μ κ³µ

4. **μ΄ μ¤‘μ—μ„ μƒμ„ 2κ° spark μ΅ Kill ν•΄μ¤?**
   - λ¦¬μ†μ¤ μ‚¬μ©λ‰μ΄ λ†’μ€ μƒμ„ 2κ° μ΅ μΆ…λ£

5. **ν΄λ¬μ¤ν„° μ‚¬μ©μ¨μ΄ λ–¨μ–΄μ΅λ”μ§€ ν™•μΈν•΄μ¤?**
   - μ΅°μΉ ν›„ ν΄λ¬μ¤ν„° μƒνƒ μ¬ν™•μΈ

## π› οΈ κΈ°μ  μ¤νƒ

- **LangChain**: LLM μ• ν”λ¦¬μΌ€μ΄μ… ν”„λ μ„μ›ν¬
- **LangGraph**: μ›ν¬ν”λ΅μ° λ° μ—μ΄μ „νΈ κ΄€λ¦¬
- **OpenAI GPT-4**: LLM λ¨λΈ
- **OpenAI Embeddings**: ν…μ¤νΈ μ„λ² λ”©
- **Chroma**: λ²΅ν„° λ°μ΄ν„°λ² μ΄μ¤ (RAG μ‹μ¤ν…)
- **Tavily**: μΈν„°λ„· κ²€μƒ‰ API
- **Gradio**: μ›Ή μΈν„°νμ΄μ¤

#

